function t(t,o,r){return o=n(o),function(t,e){if(e&&("object"==c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,e()?Reflect.construct(o,r||[],n(t).constructor):o.apply(t,r))}function e(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(e=function(){return!!t})()}function n(t){return n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)}function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,l(o.key),o)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e,n){return(e=l(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){var e=function(t,e){if("object"!=c(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=c(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c(e)?e:e+""}function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}import d from"quill";var p="object"==("undefined"==typeof global?"undefined":c(global))&&global&&global.Object===Object&&global,f="object"==("undefined"==typeof self?"undefined":c(self))&&self&&self.Object===Object&&self,h=p||f||Function("return this")(),y=h.Symbol,g=Object.prototype,v=g.hasOwnProperty,m=g.toString,b=y?y.toStringTag:void 0;var _=Object.prototype.toString;var j="[object Null]",x="[object Undefined]",w=y?y.toStringTag:void 0;function S(t){return null==t?void 0===t?x:j:w&&w in Object(t)?function(t){var e=v.call(t,b),n=t[b];try{t[b]=void 0;var o=!0}catch(t){}var r=m.call(t);return o&&(e?t[b]=n:delete t[b]),r}(t):function(t){return _.call(t)}(t)}function O(t){return null!=t&&"object"==c(t)}var z=Array.isArray;function A(t){var e=c(t);return null!=t&&("object"==e||"function"==e)}function E(t){return t}var C="[object AsyncFunction]",B="[object Function]",P="[object GeneratorFunction]",k="[object Proxy]";function U(t){if(!A(t))return!1;var e=S(t);return e==B||e==P||e==C||e==k}var M,T=h["__core-js_shared__"],D=(M=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+M:"";var q=Function.prototype.toString;var L=/^\[object .+?Constructor\]$/,R=Function.prototype,N=Object.prototype,F=R.toString,I=N.hasOwnProperty,W=RegExp("^"+F.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function H(t){return!(!A(t)||(e=t,D&&D in e))&&(U(t)?W:L).test(function(t){if(null!=t){try{return q.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}function $(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return H(n)?n:void 0}var X=Object.create,Y=function(){function t(){}return function(e){if(!A(e))return{};if(X)return X(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function G(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var V=Date.now;var J,K,Q,Z=function(){try{var t=$(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),tt=Z?function(t,e){return Z(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:E,et=(J=tt,K=0,Q=0,function(){var t=V(),e=16-(t-Q);if(Q=t,e>0){if(++K>=800)return arguments[0]}else K=0;return J.apply(void 0,arguments)}),nt=9007199254740991,ot=/^(?:0|[1-9]\d*)$/;function rt(t,e){var n=c(t);return!!(e=null==e?nt:e)&&("number"==n||"symbol"!=n&&ot.test(t))&&t>-1&&t%1==0&&t<e}function it(t,e,n){"__proto__"==e&&Z?Z(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function at(t,e){return t===e||t!=t&&e!=e}var ut=Object.prototype.hasOwnProperty;function st(t,e,n){var o=t[e];ut.call(t,e)&&at(o,n)&&(void 0!==n||e in t)||it(t,e,n)}var lt=Math.max;function ct(t,e){return et(function(t,e,n){return e=lt(void 0===e?t.length-1:e,0),function(){for(var o=arguments,r=-1,i=lt(o.length-e,0),a=Array(i);++r<i;)a[r]=o[e+r];r=-1;for(var u=Array(e+1);++r<e;)u[r]=o[r];return u[e]=n(a),G(t,this,u)}}(t,e,E),t+"")}var dt=9007199254740991;function pt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=dt}function ft(t){return null!=t&&pt(t.length)&&!U(t)}var ht=Object.prototype;function yt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ht)}function gt(t){return O(t)&&"[object Arguments]"==S(t)}var vt=Object.prototype,mt=vt.hasOwnProperty,bt=vt.propertyIsEnumerable,_t=gt(function(){return arguments}())?gt:function(t){return O(t)&&mt.call(t,"callee")&&!bt.call(t,"callee")};var jt="object"==("undefined"==typeof exports?"undefined":c(exports))&&exports&&!exports.nodeType&&exports,xt=jt&&"object"==("undefined"==typeof module?"undefined":c(module))&&module&&!module.nodeType&&module,wt=xt&&xt.exports===jt?h.Buffer:void 0,St=(wt?wt.isBuffer:void 0)||function(){return!1},Ot={};Ot["[object Float32Array]"]=Ot["[object Float64Array]"]=Ot["[object Int8Array]"]=Ot["[object Int16Array]"]=Ot["[object Int32Array]"]=Ot["[object Uint8Array]"]=Ot["[object Uint8ClampedArray]"]=Ot["[object Uint16Array]"]=Ot["[object Uint32Array]"]=!0,Ot["[object Arguments]"]=Ot["[object Array]"]=Ot["[object ArrayBuffer]"]=Ot["[object Boolean]"]=Ot["[object DataView]"]=Ot["[object Date]"]=Ot["[object Error]"]=Ot["[object Function]"]=Ot["[object Map]"]=Ot["[object Number]"]=Ot["[object Object]"]=Ot["[object RegExp]"]=Ot["[object Set]"]=Ot["[object String]"]=Ot["[object WeakMap]"]=!1;var zt="object"==("undefined"==typeof exports?"undefined":c(exports))&&exports&&!exports.nodeType&&exports,At=zt&&"object"==("undefined"==typeof module?"undefined":c(module))&&module&&!module.nodeType&&module,Et=At&&At.exports===zt&&p.process,Ct=function(){try{var t=At&&At.require&&At.require("util").types;return t||Et&&Et.binding&&Et.binding("util")}catch(t){}}(),Bt=Ct&&Ct.isTypedArray,Pt=Bt?function(t){return function(e){return t(e)}}(Bt):function(t){return O(t)&&pt(t.length)&&!!Ot[S(t)]};function kt(t,e){var n=z(t),o=!n&&_t(t),r=!n&&!o&&St(t),i=!n&&!o&&!r&&Pt(t),a=n||o||r||i,u=a?function(t,e){for(var n=-1,o=Array(t);++n<t;)o[n]=e(n);return o}(t.length,String):[],s=u.length;for(var l in t)a&&("length"==l||r&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||rt(l,s))||u.push(l);return u}var Ut=Object.prototype.hasOwnProperty;function Mt(t){if(!A(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=yt(t),n=[];for(var o in t)("constructor"!=o||!e&&Ut.call(t,o))&&n.push(o);return n}function Tt(t){return ft(t)?kt(t):Mt(t)}var Dt=$(Object,"create");var qt=Object.prototype.hasOwnProperty;var Lt=Object.prototype.hasOwnProperty;function Rt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function Nt(t,e){for(var n=t.length;n--;)if(at(t[n][0],e))return n;return-1}Rt.prototype.clear=function(){this.__data__=Dt?Dt(null):{},this.size=0},Rt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Rt.prototype.get=function(t){var e=this.__data__;if(Dt){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return qt.call(e,t)?e[t]:void 0},Rt.prototype.has=function(t){var e=this.__data__;return Dt?void 0!==e[t]:Lt.call(e,t)},Rt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Dt&&void 0===e?"__lodash_hash_undefined__":e,this};var Ft=Array.prototype.splice;function It(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}It.prototype.clear=function(){this.__data__=[],this.size=0},It.prototype.delete=function(t){var e=this.__data__,n=Nt(e,t);return!(n<0)&&(n==e.length-1?e.pop():Ft.call(e,n,1),--this.size,!0)},It.prototype.get=function(t){var e=this.__data__,n=Nt(e,t);return n<0?void 0:e[n][1]},It.prototype.has=function(t){return Nt(this.__data__,t)>-1},It.prototype.set=function(t,e){var n=this.__data__,o=Nt(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this};var Wt=$(h,"Map");function Ht(t,e){var n,o,r=t.__data__;return("string"==(o=c(n=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function $t(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}$t.prototype.clear=function(){this.size=0,this.__data__={hash:new Rt,map:new(Wt||It),string:new Rt}},$t.prototype.delete=function(t){var e=Ht(this,t).delete(t);return this.size-=e?1:0,e},$t.prototype.get=function(t){return Ht(this,t).get(t)},$t.prototype.has=function(t){return Ht(this,t).has(t)},$t.prototype.set=function(t,e){var n=Ht(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this};var Xt=function(t,e){return function(n){return t(e(n))}}(Object.getPrototypeOf,Object),Yt="[object Object]",Gt=Function.prototype,Vt=Object.prototype,Jt=Gt.toString,Kt=Vt.hasOwnProperty,Qt=Jt.call(Object);function Zt(t){var e=this.__data__=new It(t);this.size=e.size}Zt.prototype.clear=function(){this.__data__=new It,this.size=0},Zt.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Zt.prototype.get=function(t){return this.__data__.get(t)},Zt.prototype.has=function(t){return this.__data__.has(t)},Zt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof It){var o=n.__data__;if(!Wt||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new $t(o)}return n.set(t,e),this.size=n.size,this};var te="object"==("undefined"==typeof exports?"undefined":c(exports))&&exports&&!exports.nodeType&&exports,ee=te&&"object"==("undefined"==typeof module?"undefined":c(module))&&module&&!module.nodeType&&module,ne=ee&&ee.exports===te?h.Buffer:void 0;ne&&ne.allocUnsafe;var oe=h.Uint8Array;function re(t,e){var n,o,r=(n=t.buffer,o=new n.constructor(n.byteLength),new oe(o).set(new oe(n)),o);return new t.constructor(r,t.byteOffset,t.length)}var ie=function(t,e,n){for(var o=-1,r=Object(t),i=n(t),a=i.length;a--;){var u=i[++o];if(!1===e(r[u],u,r))break}return t};function ae(t,e,n){(void 0!==n&&!at(t[e],n)||void 0===n&&!(e in t))&&it(t,e,n)}function ue(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function se(t){return function(t,e,n,o){var r=!n;n||(n={});for(var i=-1,a=e.length;++i<a;){var u=e[i],s=void 0;void 0===s&&(s=t[u]),r?it(n,u,s):st(n,u,s)}return n}(t,Tt(t))}function le(t,e,n,o,r,i,a){var u=ue(t,n),s=ue(e,n),l=a.get(s);if(l)ae(t,n,l);else{var c,d=i?i(u,s,n+"",t,e,a):void 0,p=void 0===d;if(p){var f=z(s),h=!f&&St(s),y=!f&&!h&&Pt(s);d=s,f||h||y?z(u)?d=u:O(c=u)&&ft(c)?d=function(t,e){var n=-1,o=t.length;for(e||(e=Array(o));++n<o;)e[n]=t[n];return e}(u):h?(p=!1,d=s.slice()):y?(p=!1,d=re(s)):d=[]:function(t){if(!O(t)||S(t)!=Yt)return!1;var e=Xt(t);if(null===e)return!0;var n=Kt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Jt.call(n)==Qt}(s)||_t(s)?(d=u,_t(u)?d=se(u):A(u)&&!U(u)||(d=function(t){return"function"!=typeof t.constructor||yt(t)?{}:Y(Xt(t))}(s))):p=!1}p&&(a.set(s,d),r(d,s,o,i,a),a.delete(s)),ae(t,n,d)}}function ce(t,e,n,o,r){t!==e&&ie(e,(function(i,a){if(r||(r=new Zt),A(i))le(t,e,a,n,ce,o,r);else{var u=o?o(ue(t,a),i,a+"",t,e,r):void 0;void 0===u&&(u=i),ae(t,a,u)}}),Tt)}function de(t,e,n,o,r,i){return A(t)&&A(e)&&(i.set(e,t),ce(t,e,void 0,de,i),i.delete(e)),t}var pe,fe=(pe=function(t,e,n,o){ce(t,e,n,o)},ct((function(t,e){var n=-1,o=e.length,r=o>1?e[o-1]:void 0,i=o>2?e[2]:void 0;for(r=pe.length>3&&"function"==typeof r?(o--,r):void 0,i&&function(t,e,n){if(!A(n))return!1;var o=c(e);return!!("number"==o?ft(n)&&rt(e,n.length):"string"==o&&e in n)&&at(n[e],t)}(e[0],e[1],i)&&(r=o<3?void 0:r,o=1),t=Object(t);++n<o;){var a=e[n];a&&pe(t,a,n,r)}return t}))),he=ct((function(t){return t.push(void 0,de),G(fe,void 0,t)})),ye={modules:["Resize","MinSize","DisplaySize","Toolbar"],overlayStyles:{position:"absolute",boxSizing:"border-box",border:"1px dashed #444"},handleStyles:{position:"absolute",height:"12px",width:"12px",backgroundColor:"white",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80"},displayStyles:{position:"absolute",font:"12px/1.0 Arial, Helvetica, sans-serif",padding:"4px 8px",textAlign:"center",textWrap:"nowrap",backgroundColor:"white",color:"#333",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80",cursor:"default"},toolbarStyles:{position:"absolute",top:"-12px",right:"0",left:"0",height:"0",minWidth:"100px",font:"12px/1.0 Arial, Helvetica, sans-serif",textAlign:"center",color:"#333",boxSizing:"border-box",cursor:"default"},toolbarButtonStyles:{display:"inline-block",width:"24px",height:"24px",background:"white",border:"1px solid #999",verticalAlign:"middle"},toolbarButtonSvgStyles:{fill:"#444",stroke:"#444",strokeWidth:"2"}},ge=a((function t(e){u(this,t),s(this,"onCreate",(function(){})),s(this,"onDestroy",(function(){})),s(this,"onUpdate",(function(){})),this.overlay=e.overlay,this.img=e.img,this.options=e.options,this.requestUpdate=e.onUpdate,this.quill=e.quill,this.resizer=e})),ve=function(e){function n(){var e;u(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return s(e=t(this,n,[].concat(r)),"onCreate",(function(){e.display=document.createElement("div"),Object.assign(e.display.style,e.options.displayStyles),e.overlay.appendChild(e.display)})),s(e,"onDestroy",(function(){})),s(e,"onUpdate",(function(){if(e.display&&e.img){var t=e.getCurrentSize();e.display.innerHTML=t.join(" &times; "),t[0]>120&&t[1]>40?Object.assign(e.display.style,{right:"4px",bottom:"4px",left:null,transform:null}):"right"==e.img.style.float?Object.assign(e.display.style,{right:null,bottom:null,transform:"translate(calc(-100% - 4px), ".concat(e.img.height,"px)")}):Object.assign(e.display.style,{left:null,bottom:null,transform:"translate(calc(100% + 4px), ".concat(e.img.height,"px)")})}})),s(e,"getCurrentSize",(function(){return[e.img.width,e.img.height]})),e}return o(n,ge),a(n)}(),me=d.import("ui/icons"),be=me.align[""],_e=me.align.center,je=me.align.right,xe=d.imports.parchment,we=xe.Attributor.Style?xe.Attributor.Style:xe.StyleAttributor,Se=new we("float","float"),Oe=new we("margin","margin"),ze=new we("display","display"),Ae=function(e){function n(){var e;u(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return s(e=t(this,n,[].concat(r)),"onCreate",(function(){e.toolbar=document.createElement("div"),Object.assign(e.toolbar.style,e.options.toolbarStyles),e.overlay.appendChild(e.toolbar),e._defineAlignments(),e._addToolbarButtons(),e.updatePosition()})),s(e,"onDestroy",(function(){})),s(e,"onUpdate",(function(){e.updatePosition()})),s(e,"updatePosition",(function(){var t=e.alignments.find((function(t){return t.isApplied(e.img)}));t&&e.img.width<e.toolbar.getBoundingClientRect().width?Object.assign(e.toolbar.style,t.boxStyle):Object.assign(e.toolbar.style,{left:"0",right:"0"})})),s(e,"_defineAlignments",(function(){e.alignments=[{icon:be,apply:function(){ze.add(e.img,"inline"),Se.add(e.img,"left"),Oe.add(e.img,"0 1em 1em 0")},isApplied:function(){return"left"==Se.value(e.img)},boxStyle:{left:"0",right:"0"}},{icon:_e,apply:function(){ze.add(e.img,"block"),Se.remove(e.img),Oe.add(e.img,"auto")},isApplied:function(){return"auto"==Oe.value(e.img)},boxStyle:{left:"0",right:"0"}},{icon:je,apply:function(){ze.add(e.img,"inline"),Se.add(e.img,"right"),Oe.add(e.img,"0 0 1em 1em")},isApplied:function(){return"right"==Se.value(e.img)},boxStyle:{left:null,right:"0"}}]})),s(e,"_addToolbarButtons",(function(){var t=[];e.alignments.forEach((function(n,o){var r=document.createElement("span");t.push(r),r.innerHTML=n.icon,r.addEventListener("click",(function(){t.forEach((function(t){return t.style.filter=""})),n.isApplied()?(Se.remove(e.img),Oe.remove(e.img),ze.remove(e.img)):(e._selectButton(r),n.apply()),e.requestUpdate()})),Object.assign(r.style,e.options.toolbarButtonStyles),o>0&&(r.style.borderLeftWidth="0"),Object.assign(r.children[0].style,e.options.toolbarButtonSvgStyles),n.isApplied()&&e._selectButton(r),e.toolbar.appendChild(r)}))})),s(e,"_selectButton",(function(t){t.style.filter="invert(20%)"})),e}return o(n,ge),a(n)}(),Ee=function(e){function n(){var e;u(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return s(e=t(this,n,[].concat(r)),"onCreate",(function(){e.boxes=[],e.addBox("nwse-resize"),e.addBox("nesw-resize"),e.addBox("nwse-resize"),e.addBox("nesw-resize"),e.positionBoxes()})),s(e,"onDestroy",(function(){e.setCursor("")})),s(e,"positionBoxes",(function(){var t="".concat(-parseFloat(e.options.handleStyles.width)/2,"px"),n="".concat(-parseFloat(e.options.handleStyles.height)/2,"px");[{left:t,top:n},{right:t,top:n},{right:t,bottom:n},{left:t,bottom:n}].forEach((function(t,n){Object.assign(e.boxes[n].style,t)}))})),s(e,"addBox",(function(t){var n=document.createElement("div");Object.assign(n.style,e.options.handleStyles),n.style.cursor=t,n.style.width="".concat(e.options.handleStyles.width,"px"),n.style.height="".concat(e.options.handleStyles.height,"px"),n.addEventListener("mousedown",e.handleMousedown,!1),e.overlay.appendChild(n),e.boxes.push(n)})),s(e,"handleMousedown",(function(t){e.dragBox=t.target,e.dragStartX=t.clientX,e.dragStartY=t.clientY,e.preDragWidth=e.img.width||e.img.naturalWidth,e.preDragHeight=e.img.height||e.img.naturalHeight,e.setCursor(e.dragBox.style.cursor),document.addEventListener("mousemove",e.handleDrag,!1),document.addEventListener("mouseup",e.handleMouseup,!1)})),s(e,"handleMouseup",(function(){e.setCursor(""),document.removeEventListener("mousemove",e.handleDrag),document.removeEventListener("mouseup",e.handleMouseup)})),s(e,"handleDrag",(function(t){if(e.img){var n=t.clientX-e.dragStartX,o=t.clientY-e.dragStartY;e.dragBox===e.boxes[0]||e.dragBox===e.boxes[3]?e.img.width=Math.round(e.preDragWidth-n):e.img.width=Math.round(e.preDragWidth+n),e.options.freeAspectRatio?e.dragBox===e.boxes[0]||e.dragBox===e.boxes[3]?e.img.height=Math.round(e.preDragHeight-o):e.img.height=Math.round(e.preDragHeight+o):e.img.height=Math.round(e.img.width/e.img.naturalWidth*e.img.naturalHeight),e.requestUpdate()}})),s(e,"setCursor",(function(t){[document.body,e.img].forEach((function(e){e.style.cursor=t}))})),e}return o(n,ge),a(n)}(),Ce=function(e){function n(){var e;u(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return s(e=t(this,n,[].concat(r)),"onCreate",(function(){e.resolveOptions()})),s(e,"onUpdate",(function(){if(d.find(e.img)){var t=!1;e.img.width<e.options.minSize[0]&&(e.img.width=e.options.minSize[0],e.overlay.style.width=e.img.width+"px",e.overlay.style.height=e.img.height+"px",t=!0),e.img.height<e.options.minSize[1]&&(e.img.height=e.options.minSize[1],e.overlay.style.width=e.img.width+"px",e.overlay.style.height=e.img.height+"px",t=!0),t&&e.resizer.repositionElements()}else e.resizer.hide()})),s(e,"resolveOptions",(function(){if(e.options.minSize&&!Number.isNaN(e.options.minSize)||(e.options.minSize=48),Array.isArray(e.options.minSize)||(e.options.minSize=[e.options.minSize,e.options.minSize]),!e.options.freeAspectRatio){var t=e.img.naturalWidth/e.img.naturalHeight,n=e.options.minSize[0]/t;e.options.minSize=[e.options.minSize[0],n]}})),e}return o(n,ge),a(n)}(),Be={DisplaySize:ve,Toolbar:Ae,Resize:Ee,MinSize:Ce},Pe=a((function t(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this,t),s(this,"initializeModules",(function(){n.removeModules(),n.modules=n.moduleClasses.map((function(t){return new(Be[t]||t)(n)})),n.modules.forEach((function(t){t.onCreate()})),n.onUpdate()})),s(this,"onUpdate",(function(){n.repositionElements(),n.modules.forEach((function(t){t.onUpdate()}))})),s(this,"removeModules",(function(){n.modules.forEach((function(t){t.onDestroy()})),n.modules=[]})),s(this,"handleClick",(function(t){if(t.target&&t.target.tagName&&"IMG"===t.target.tagName.toUpperCase()){if(n.img===t.target)return;n.img&&n.hide(),n.show(t.target)}else n.img&&n.hide()})),s(this,"show",(function(t){n.img=t,n.showOverlay(),n.initializeModules()})),s(this,"showOverlay",(function(){n.overlay&&n.hideOverlay(),n.quill.setSelection(null),n.setUserSelect("none"),document.addEventListener("keyup",n.checkImage,!0),n.quill.root.addEventListener("input",n.checkImage,!0),n.overlay=document.createElement("div"),Object.assign(n.overlay.style,n.options.overlayStyles),n.quill.root.parentNode.appendChild(n.overlay),n.repositionElements()})),s(this,"hideOverlay",(function(){n.overlay&&(n.quill.root.parentNode.removeChild(n.overlay),n.overlay=void 0,document.removeEventListener("keyup",n.checkImage),n.quill.root.removeEventListener("input",n.checkImage),n.setUserSelect(""))})),s(this,"repositionElements",(function(){if(n.overlay&&n.img){var t=n.quill.root.parentNode,e=n.img.getBoundingClientRect(),o=t.getBoundingClientRect();Object.assign(n.overlay.style,{left:"".concat(e.left-o.left-1+t.scrollLeft,"px"),top:"".concat(e.top-o.top+t.scrollTop,"px"),width:"".concat(e.width,"px"),height:"".concat(e.height,"px")})}})),s(this,"hide",(function(){n.hideOverlay(),n.removeModules(),n.img=void 0})),s(this,"setUserSelect",(function(t){["userSelect","mozUserSelect","webkitUserSelect","msUserSelect"].forEach((function(e){n.quill.root.style[e]=t,document.documentElement.style[e]=t}))})),s(this,"checkImage",(function(t){n.img&&(46!=t.keyCode&&8!=t.keyCode||d.find(n.img).deleteAt(0),n.hide())})),this.quill=e;var r=!1;o.modules&&(r=o.modules.slice()),this.options=he({},o,ye),!1!==r&&(this.options.modules=r),document.execCommand("enableObjectResizing",!1,"false"),this.quill.root.addEventListener("click",this.handleClick,!1),this.quill.root.parentNode.style.position=this.quill.root.parentNode.style.position||"relative",this.moduleClasses=this.options.modules,this.modules=[]}));export{ve as DisplaySize,Pe as ImageResize,Ce as MinSize,Ee as Resize,Ae as Toolbar,Pe as default};
//# sourceMappingURL=index.js.map
